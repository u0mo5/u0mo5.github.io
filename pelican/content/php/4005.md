Title: PHP获取远程图片
Date: 1970-01-01 00:00:00
Modified: 1970-01-01 00:00:00
cat: php
Tags: 
Slug: 4005
Authors: u0mo5 
Summary: 

&lt;?php&nbsp;//&nbsp;// Function: 获取远程图片并把它保存到本地&nbsp;//&nbsp;//&nbsp;// 确定您有把文件写入本地服务器的权限&nbsp;//&nbsp;//&nbsp;// 变量说明:&nbsp;// $url 是远程图片的完整URL地址，不能为空。&nbsp;// $filename 是可选变量: 如果为空，本地文件名将基于时间和日期&nbsp;// 自动生成.&nbsp;function GrabImage($url,$filename=&quot;&quot;) {&nbsp;if($url==&quot;&quot;):return false;endif;&nbsp;if($filename==&quot;&quot;) {&nbsp;$ext=strrchr($url,&quot;.&quot;);&nbsp;if($ext!=&quot;.gif&quot; &amp;&amp; $ext!=&quot;.jpg&quot;):return false;endif;&nbsp;$filename=date(&quot;dMYHis&quot;).$ext;&nbsp;}&nbsp;ob_start();&nbsp;readfile($url);&nbsp;$img = ob_get_contents();&nbsp;ob_end_clean();&nbsp;$size = strlen($img);&nbsp;$fp2=@fopen($filename, &quot;a&quot;);&nbsp;fwrite($fp2,$img);&nbsp;fclose($fp2);&nbsp;return $filename;&nbsp;}&nbsp;$img=GrabImage(&quot;http://www.php100.com/images/_1978837_detector_ap100.jpg&quot;,&quot;&quot;);&nbsp;if($img):echo ‘&lt;pre&gt;&lt;img src=&quot;’.$img.’&quot;&gt;&lt;/pre&gt;’;&nbsp;else:echo &quot;false&quot;;&nbsp;endif;&nbsp;?&gt;
