Title: 最简单的mybatis增删改查样例
Date: 1970-01-01 00:00:00
Modified: 1970-01-01 00:00:00
cat: default
Tags: 
Slug: 3882
Authors: u0mo5 
Summary: 

最简单的mybatis增删改查样例 Book.java 


Java代码  




package com.bookstore.app;  
  
import java.io.Serializable;  
  
public class Book implements Serializable {  
  
    private static final long serialVersionUID = 233559895466038160L;  

    private String isbn;  

    private String name;  

    private String price;  

  
    public String getIsbn() {  

        return isbn;  

    }  
  
    public void setIsbn(String isbn) {  

        this.isbn = isbn;  

    }  
  
    public String getPrice() {  

        return price;  

    }  
  
    public void setPrice(String price) {  

        this.price = price;  

    }  
  
    public void setName(String name) {  

        this.name = name;  

    }  
  
    public String getName() {  

        return name;  

    }  
@Override  
    public String toString() {  

        return "BookName: " + this.name + ", price: " + this.price;  

    }  
  
}  




mybatis-config.xml 


Xml代码  




&lt;?xml version="1.0" encoding="UTF-8"?&gt;  
&lt;!DOCTYPE configuration  
    PUBLIC "-//mybatis.org//DTD Config 3.0//EN"  
    "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;  

  
&lt;configuration&gt;  
    &lt;settings&gt;  

        &lt;setting name="lazyLoadingEnabled" value="false" /&gt;  

    &lt;/settings&gt;  

  
    &lt;typeAliases&gt;  

        &lt;typeAlias alias="Book" type="com.bookstore.app.Book" /&gt;  

    &lt;/typeAliases&gt;  

  
    &lt;environments default="development"&gt;  

        &lt;environment id="development"&gt;  

            &lt;transactionManager type="JDBC" /&gt;  

            &lt;dataSource type="POOLED"&gt;  

                &lt;property name="driver" value="com.mysql.jdbc.Driver" /&gt;  

                &lt;property name="url" value="jdbc:mysql://localhost:3306/mybatis" /&gt;  

                &lt;property name="username" value="root" /&gt;  

                &lt;property name="password" value="root" /&gt;  

            &lt;/dataSource&gt;  

        &lt;/environment&gt;  

    &lt;/environments&gt;  

    &lt;mappers&gt;  

        &lt;mapper resource="com/bookstore/config/bookMapper.xml" /&gt;  

    &lt;/mappers&gt;  

&lt;/configuration&gt;  




bookMapper.xml 


Xml代码  




&lt;?xml version="1.0" encoding="UTF-8"?&gt;  
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"   
"http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;  

  
&lt;mapper namespace="com.bookstore.app.bookMapper"&gt;  
    &lt;select id="getBookByName" resultType="Book" parameterType="string"&gt;  

        select *  
        from book  
        where name=#{name}  

    &lt;/select&gt;  

    &lt;insert id="insertBook" parameterType="Book"&gt;  

        insert into book(isbn, name, price)  
        value(#{isbn}, #{name}, #{price})  
    &lt;/insert&gt;  

    &lt;update id="updateBook" parameterType="Book"&gt;  

        update book   
        set  
        name=#{name},  

        price=#{price}  

        where isbn=#{isbn}  

    &lt;/update&gt;  

    &lt;delete id="deleteBook" parameterType="String"&gt;  

        delete from book where name=#{name}       

    &lt;/delete&gt;  

&lt;/mapper&gt;  




BookApp.java 


Java代码  




package com.bookstore.app;  
  
import java.io.IOException;  
import java.io.Reader;  
  
import org.apache.ibatis.io.Resources;  
import org.apache.ibatis.session.SqlSession;  
import org.apache.ibatis.session.SqlSessionFactory;  
import org.apache.ibatis.session.SqlSessionFactoryBuilder;  
  
public class BookApp {  
    public static void main(String[] args) throws IOException {  

        String resource = "com/bookstore/config/mybatis-config.xml";  

        Reader reader = Resources.getResourceAsReader(resource);  
        SqlSessionFactory sessionFactory = new SqlSessionFactoryBuilder()  

                .build(reader);  
        SqlSession session = sessionFactory.openSession();  
        //查询  

        Book book = (Book) session.selectOne(  
                "com.bookstore.app.bookMapper.getBookByName", "Spring In Action");  

        System.out.println(book.toString());  
        //修改  

        book.setName("Spring In Action 2ed Edition");  

        book.setPrice("59");  

        session.update("com.bookstore.app.bookMapper.updateBook", book);  

        //插入  

        Book newBook = new Book();  

        newBook.setIsbn("ISBN978-7-121-10577-7");  

        newBook.setName("人人都是产品经理");  

        newBook.setPrice("45");  

        session.insert("com.bookstore.app.bookMapper.insertBook", newBook);  

        //删除  

        session.delete("com.bookstore.app.bookMapper.deleteBook", "Struts In Action");  

        session.commit();  
    }  
}  




