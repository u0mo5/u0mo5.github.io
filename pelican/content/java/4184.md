Title: Android 通过网页打开自己的APP(scheme)
Date: 1970-01-01 00:00:00
Modified: 1970-01-01 00:00:00
cat: default
Tags: 
Slug: 4184
Authors: u0mo5 
Summary: 


Android 通过网页打开自己的APP(scheme)

分类： android2014-07-09 17:35 8565人阅读 评论(2) 收藏 举报

通过用手机的浏览器(内置，第三方都可)访问一个网页，实现点击一个链接启动自己的应用，并传递数据。
首先在Mainifest文件里面对要启动的Activity添加一个过滤器。
 



[java] view plaincopy
 



&lt;activity  
            android:name="com.example.helloworld.MainActivity"  

            android:label="@string/app_name" &gt;  

            &lt;intent-filter&gt;  
                &lt;action android:name="android.intent.action.MAIN" /&gt;  

  
                &lt;category android:name="android.intent.category.LAUNCHER" /&gt;  

            &lt;/intent-filter&gt;  
            &lt;intent-filter&gt;  
                &lt;action android:name="android.intent.action.VIEW"/&gt;     

                &lt;category android:name="android.intent.category.DEFAULT"/&gt;               

                &lt;category android:name="android.intent.category.BROWSABLE"/&gt;  

                &lt;data android:scheme="znn"/&gt;  

            &lt;/intent-filter&gt;  
        &lt;/activity&gt;  


在MainActivity接收数据：
 
 



[java] view plaincopy
 





public class MainActivity extends Activity implements View.OnClickListener{  
  
    @Override  

    protected void onCreate(Bundle savedInstanceState) {  

        super.onCreate(savedInstanceState);  

        setContentView(R.layout.activity_main);  
  
        Intent intent = getIntent();  
        String scheme = intent.getScheme();  
        Uri uri = intent.getData();  
        System.out.println("scheme:"+scheme);  

        if (uri != null) {  

            String host = uri.getHost();  
            String dataString = intent.getDataString();  
            String id = uri.getQueryParameter("d");  

            String path = uri.getPath();  
            String path1 = uri.getEncodedPath();  
            String queryString = uri.getQuery();  
            System.out.println("host:"+host);  

            System.out.println("dataString:"+dataString);  

            System.out.println("id:"+id);  

            System.out.println("path:"+path);  

            System.out.println("path1:"+path1);  

            System.out.println("queryString:"+queryString);  

        }  
          
    }  
}  




 
写一个最简单的网页：
 



[html] view plaincopy
 





&lt;a href="znn://aa.bb:80/test?p=12&amp;d=1"&gt;test&lt;/a&gt;  




 

测试地址:www.erdian.net/m.html 
测试结果：
scheme:znnhost:aa.bbdataString:znn://aa.bb:80/test?p=12&amp;id=1id:1path:/testpath1:/test
queryString:p=12&amp;d=1
 
http://www.erdian.net/?p=238

版权声明：本文为博主原创文章，未经博主允许不得转载。




