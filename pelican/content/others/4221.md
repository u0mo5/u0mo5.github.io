Title: 台式机的集显HD4600驱动-黑苹果之路
Date: 1970-01-01 00:00:00
Modified: 1970-01-01 00:00:00
cat: default
Tags: 
Slug: 4221
Authors: u0mo5 
Summary: 

台式机的集显HD4600驱动-黑苹果之路


　　半桶水还真可怕，整了一个礼拜的台式机黑苹果，竟然都没搞定asus z87-k的HD4600核显。最终为了不耽误工作，上淘宝，花钱买服务。显卡驱动分为变色龙和clover两种不同引导。淘宝上的帮我搞定变色龙，自己搞定clover（又是一个礼拜）。
一、变色龙：
　　首先，还原yosemite 10.10.3的原版驱动。
　　其次，使用chameleon的帮助精灵，修改了azul fb=7等参数。
　　最后，重启。
　　第一次重启后出现雪花，很长时间，差点以为死了，没想到竟然出现了登录画面，而且一起都ok，再启动雪花就一闪而过。
　　商家不错，30分钟搞定，做完了还点拨了一下，总结如下：
　　核显需要在变色龙的配置文件中添加显卡的平台ID，HD4600的id有7、12、4。
　　之前我一直没搞定的问题是如何注入显卡参数，其实非常简单，使用chameleon的配置精灵，修改了mac分区下extra目录下的chameleon配置文件org.chameleon.Boot.plist即可。附该配置，红色字体为修改部分。


&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
    &lt;key&gt;Default Partition&lt;/key&gt;
    &lt;string&gt;hd(1,2)&lt;/string&gt;
    &lt;key&gt;EthernetBuiltIn&lt;/key&gt;
    &lt;string&gt;Yes&lt;/string&gt;
    &lt;key&gt;GraphicsEnabler&lt;/key&gt;
    &lt;string&gt;Yes&lt;/string&gt;
    &lt;key&gt;HDAEnabler&lt;/key&gt;
    &lt;string&gt;Yes&lt;/string&gt;
    &lt;key&gt;HDEFLayoutID&lt;/key&gt;
    &lt;string&gt;01000000&lt;/string&gt;
    &lt;key&gt;IGPEnabler&lt;/key&gt;
    &lt;string&gt;Yes&lt;/string&gt;
    &lt;key&gt;IntelAzulFB&lt;/key&gt;
    &lt;string&gt;7&lt;/string&gt;
    &lt;key&gt;Kernel Flags&lt;/key&gt;
    &lt;string&gt;-f kext-dev-mode=1 darkwake=0 dart=0&lt;/string&gt;
    &lt;key&gt;Legacy Logo&lt;/key&gt;
    &lt;string&gt;Yes&lt;/string&gt;
    &lt;key&gt;SkipAtiGfx&lt;/key&gt;
    &lt;string&gt;Yes&lt;/string&gt;
    &lt;key&gt;SkipNvidiaGfx&lt;/key&gt;
    &lt;string&gt;Yes&lt;/string&gt;
    &lt;key&gt;Timeout&lt;/key&gt;
    &lt;string&gt;5&lt;/string&gt;
    &lt;key&gt;UseKernelCache&lt;/key&gt;
    &lt;string&gt;Yes&lt;/string&gt;
&lt;/dict&gt;
&lt;/plist&gt;


 二、clover：
　　这个又折腾了我很久。使用GPT分区，用clover引导（版本3215），过程纠结，不提了。装好后原生就能识别HD4600，但显存只有7M，很卡。不停地折腾ig-platform-id，甚至打算修改DSDT。最后又是在一个帖子上才发现自己又是半桶水，只改了一部分，需要做设备的fakeid。
clover的配置文件改两个地方：
1、Device章的IntelGFX=0x04128086
2、Graphics章的ig-platform-id=0x0d220003、Inject Intel
一切OK。推荐几个链接：
http://bbs.pcbeta.com/viewthread-1465761-1-1.html
http://bbs.pcbeta.com/viewthread-1573607-1-1.html
http://bbs.pcbeta.com/viewthread-1568601-1-1.html
http://bbs.pcbeta.com/viewthread-1571457-1-1.html
http://bbs.pcbeta.com/viewthread-1586669-1-1.html

 

 
标签: 驱动, chameleon, clover, HD4600, 10.10.3, Asus z87-k, 变色龙



