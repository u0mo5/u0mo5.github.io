<!DOCTYPE html>
<html lang="english">
<head>

        <title>JAVA地址栏重写很详细</title>
        <meta charset="utf-8" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="/theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="/theme/pygment.css" />

        <script src="/theme/js/libs/modernizr-2.6.2.min.js"></script>




</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="/">读书圈博客 <strong></strong></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="/">Home</a></li>


              </ul>
            </div>

<section id="content" class="body">

   <div class="row">
        <div class="eleven columns">


            <header>
              <h2 class="entry-title">
                <a href="/3869.html" rel="bookmark"
                   title="Permalink to JAVA地址栏重写很详细">JAVA地址栏重写很详细</a></h2>
           
            </header>
            <footer class="post-info">
              <abbr class="published" title="1970-01-01T00:00:00+08:00">
                Thu 01 January 1970
              </abbr>
              <address class="vcard author">By 
                <a class="url fn" href="/author/u0mo5.html"> u0mo5</a>
              </address>
            </footer><!-- /.post-info -->
            <div class="entry-content">
              <p>这几天蛋疼.看看别人url重写是怎么搞的..1.解释下什么事url重写，以及它的优缺点：URL重写，其实就是把带一大堆参数的url，变成一个看上去很规矩的url。例：/viewthread.jsp?id=1234 重写后，可以用/viewthread/1234.html使用Url重写能给你网站带来哪些好处。第一：有利于搜索引擎的抓取，因为现在大部分的搜索引擎对动态页面的抓取还比较弱，它们更喜欢抓取一些静态的页面。而我们现在的页面大部分的数据都是动态的显示的。这就需要我们把动态页面变成静态的页面，有利于搜索引擎的抓取。第二：让用户更容易理解，很少有用户去关心你网站的页面的地址，但对一般的大中型网站增强可读性还是必须的。这样会让你的网站更加完美。第三：隐藏技术的实现，我们可以通过Url重写可以实现技术的隐藏。不至于暴露你所采用的技术，给一些想攻击你网站的爱好者提供方便。第四：可以很方便的重用，提高网站的移植性。如果我们后台方法改动的话，可以保证前台的页面部分不用改。这样就提高了网站的移植性。它虽然有这么多的优点，但是也有一点缺点的，因为它是通过过滤器原理来实现的，就以为着又多了一道访问，会多少影响点访问速度的，这个可以忽略不计首先让我们了解它的工作原理，说白了它就是一个简单的过滤器（Filter），将请求的url 转换成我们想要的url,再对它进行请求的过程。url重写有好几种做法：一、自定义过滤器示例：1.配置过滤器一般在web.xml中&lt;filter&gt;&lt;filter-name&gt;urlFilter&lt;/filter-name&gt;&lt;filter-class&gt;com.url.filter.URLFilter&lt;/filter-class&gt;&lt;/filter&gt;&lt;filter-mapping&gt;&lt;filter-name&gt;urlFilter&lt;/filter-name&gt;&lt;url-pattern&gt;<em>.shtml&lt;/url-pattern&gt;&lt;/filter-mapping&gt;2.新建解析规则配置文件 urlrewrite.xml&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;urlrewrite&gt;&lt;rule&gt;&lt;from&gt;^/(w+)<em>(w+)</em>(d+).shtml$&lt;/from&gt; 匹配表达式-正则表达式&lt;to type="forward"&gt;/$1.do?$2=$3&lt;/to&gt; 解析后URL&lt;/rule&gt;&lt;/urlrewrite&gt;3.过滤器处理类 URLFilter.java public class URLFilter implements Filter {public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException,ServletException {HttpServletRequest request = (HttpServletRequest) servletRequest;HttpServletResponse response = (HttpServletResponse) servletResponse;String realPath =request.getSession().getServletContext().getRealPath("/");String fileName = realPath + "WEB-INFurlrewrite.xml";String uri = request.getServletPath();String rewriteUrl = getRewriteUrl(uri, fileName);if (null != rewriteUrl) {request.getRequestDispatcher(rewriteUrl).forward(request, response);return;}filterChain.doFilter(servletRequest, servletResponse);}private String getRewriteUrl(String url, String fileName) {DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();try {DocumentBuilder builder = f.newDocumentBuilder();Document document = builder.parse(fileName);NodeList list = document.getElementsByTagName_r("rule");for (int i = 0; i &lt; list.getLength(); i++) {Element elemnt = (Element) list.item(i);NodeList list2 = elemnt.getElementsByTagName_r("from");Element element = (Element) list2.item(0);String formValue = element.getFirstChild().getNodeValue();NodeList list3 = elemnt.getElementsByTagName_r("to");Element element2 = (Element) list3.item(0);String type = element2.getAttribute("type");String toValue = element2.getFirstChild().getNodeValue();String rewriteUrl = url.replaceAll(formValue, toValue);if (url != null &amp;&amp; !"".equals(url.trim()) &amp;&amp; !url.equals(rewriteUrl)) {return rewriteUrl;}}} catch (Exception ex) {ex.printStackTrace();}return null;}}二、 Tomcat的过滤器组件1：下载urlrewrite-2.6.0.现在最新版本是3.1 的。http://tuckey.org/urlrewrite/dist/urlrewritefilter-2.6.ziphttp://urlrewritefilter.googlecode.com/files/urlrewritefilter-3.1.0.zip把 urlrewrite-2.6.0.jar拷到classpath下。2：在WEB-INF目录下建一个urlrewrite.xml文件。&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 2.6//EN""http://tuckey.org/res/dtds/urlrewrite2.6.dtd"&gt;&lt;urlrewrite&gt;&lt;rule&gt;&lt;from&gt;^/(w+)<em>(w+)</em>(d+).shtml$&lt;/from&gt;&lt;to type="forward"&gt;/$1.do?$2=$3&amp;amp;pageSize=15&lt;/to&gt;&lt;/rule&gt;&lt;/urlrewrite&gt;解释：&lt;from&gt;&lt;/from&gt;写上你自己定义的访问地址&lt;to type="forward&gt;&lt;/to&gt;就是实际的访问地址。比如我们实际的访问地址是： /URLRewriterDemo/ uRLTestAction.do?pageNumber=123而我们想把它重写：/URLRewriterDemo/uRLTestAction_pageNumber_123.shtml这样看起来比我们实际的要好看的多。我们就应该这样的写&lt;rule&gt;&lt;from&gt;^/(w+)<em>(w+)</em>(d+).shtml$&lt;/from&gt;&lt;to type="forward"&gt;/$1.do?$2=$3&amp;amp;pageSize=15&lt;/to&gt;&lt;/rule&gt;注意：常用的&amp;要用 &amp;amp; 来表示。$1,$2代表与你配置正规表达式&gt;/(w+)/(w+)/相对应的参数。&lt;to type="forward"&gt;默认的是 type="forward".3：在web.xml中初始化。加上下面的代码：&lt;filter&gt;&lt;filter-name&gt;UrlRewriteFilter&lt;/filter-name&gt;&lt;filter-class&gt;org.tuckey.web.filters.urlrewrite.UrlRewriteFilter&lt;/filter-class&gt;&lt;/filter&gt;&lt;filter-mapping&gt;&lt;filter-name&gt;UrlRewriteFilter&lt;/filter-name&gt;&lt;url-pattern&gt;</em>.shtml&lt;/url-pattern&gt;&lt;/filter-mapping&gt;三、使用系统的404错误进行当请求时肯定是找不见相关页面了，那就跳到Error.jsp 进行相应的处理1.加入错误跳转配置 web.xml&lt;error-page&gt;&lt;error-code&gt;404&lt;/error-code&gt;&lt;location&gt;/error.jsp&lt;/location&gt;&lt;/error-page&gt;2.写错误页面 Error.jsp&lt;%@ page language="java" contentType="text/html; charset=GBK" pageEncoding="GBK"%&gt;&lt;% response.setStatus(HttpServletResponse.SC_OK); String key = (String) request.getAttribute("javax.servlet.forward.servlet_path"); String reg = "^/(w+)<em>(w+)</em>(d+).shtml$";String rewriteUrl = key.replaceAll(reg,"/$1.do?$2=$3&amp;amp;pageSize=15");if(key != null || !key.equals(rewriteUrl)){request.getRequestDispatcher(rewriteUrl).forward(request,response);}else{out.print("对不起，您请求的页面没有找到! ");}%&gt;</p>
            </div><!-- /.entry-content -->


        </div><!-- /.eleven.columns -->

<div class="three columns">

<h4>Pages</h4>

 <ul>
  </ul>

<h4>Categories</h4>
<ul class="blank">
		<li><a href="/category/default.html">default</a></li>
		<li><a href="/category/java.html">java</a></li>
		<li><a href="/category/javascript.html">javascript</a></li>
		<li><a href="/category/linux.html">linux</a></li>
		<li><a href="/category/mysql.html">mysql</a></li>
		<li><a href="/category/php.html">php</a></li>
		<li><a href="/category/python.html">python</a></li>
		<li><a href="/category/windows.html">windows</a></li>
</ul>


<h4>Tags</h4>


<nav class="widget">
  <h4>Social</h4>
  <ul class="blank">
    <li><a href="http://bookfuns.com">读书圈</a></li>
    <li><a href="http://123.bookfuns.com">网址大全</a></li>
  </ul>
</nav>

</div> </div><!-- /.row -->


</section>

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">

    
        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">





              </ul>
            </div>
          </div>
        </footer>

    </div>


  <script src="/theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="/theme/js/libs/gumby.min.js"></script>
  <script src="/theme/js/plugins.js"></script>
</body>
</html>