<!DOCTYPE html>
<html lang="english">
<head>

        <title>Java SSH框架系列：用户登录模块的设计与实现思路</title>
        <meta charset="utf-8" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="/theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="/theme/pygment.css" />

        <script src="/theme/js/libs/modernizr-2.6.2.min.js"></script>




</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="/">读书圈博客 <strong></strong></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="/">Home</a></li>


              </ul>
            </div>

<section id="content" class="body">

   <div class="row">
        <div class="eleven columns">


            <header>
              <h2 class="entry-title">
                <a href="/3896.html" rel="bookmark"
                   title="Permalink to Java SSH框架系列：用户登录模块的设计与实现思路">Java SSH框架系列：用户登录模块的设计与实现思路</a></h2>
           
            </header>
            <footer class="post-info">
              <abbr class="published" title="1970-01-01T00:00:00+08:00">
                Thu 01 January 1970
              </abbr>
              <address class="vcard author">By 
                <a class="url fn" href="/author/u0mo5.html"> u0mo5</a>
              </address>
            </footer><!-- /.post-info -->
            <div class="entry-content">
              <p>时间 2014-01-19 16:14:54  CSDN博客原文  http://blog.csdn.net/nupt123456789/article/details/18504615</p>
<p>1.简介 用户登录模块，指的是根据用户输入的用户名和密码，对用户的身份进行验证等。如果用户没有登录，用户就无法访问其他的一些jsp页面，甚至是action都不能访问。 二、简单设计及实现 本程序是基于Java的SSH框架进行的。 1.数据库设计 我们应该设计一个用户表，其Userinfo表，对应的SQL语句为（Oracle数据库）：
create table userinfo
(
  id                        varchar2(36) primary key,
  username                 varchar2(50) not null,
  password                 varchar2(50) not null,
  auth_limit               varchar2(10) not null,
  register_time           varchar2(40),
  create_time             varchar2(40),
  remarks                  varchar2(1024)             <br>
);
分别是id，也就是UUID，用户名、密码、权限、注册时间、记录插入数据库的时间、备注等几个字段。
2.使用MyEclipse的Hibernate逆向工具，生成对应的Java Bean和相应的hibernate的xml配置文件Userinfo.hbm.xml 
package edu.njupt.zhb.bean;</p>
<p>/*<em>
 * Userinfo entity. @author MyEclipse Persistence Tools
 </em>/</p>
<p>public class Userinfo implements java.io.Serializable {</p>
<p>// Fields</p>
<p>private String id;
  private String username;
  private String password;
  private String authLimit;
  private String registerTime;
  private String createTime;
  private String remarks;</p>
<p>// Constructors</p>
<p>/*<em> default constructor </em>/
  public Userinfo() {
  }</p>
<p>/*<em> minimal constructor </em>/
  public Userinfo(String id, String username, String password,
      String authLimit) {
    this.id = id;
    this.username = username;
    this.password = password;
    this.authLimit = authLimit;
  }</p>
<p>/*<em> full constructor </em>/
  public Userinfo(String id, String username, String password,
      String authLimit, String registerTime, String createTime,
      String remarks) {
    this.id = id;
    this.username = username;
    this.password = password;
    this.authLimit = authLimit;
    this.registerTime = registerTime;
    this.createTime = createTime;
    this.remarks = remarks;
  }</p>
<p>// Property accessors</p>
<p>public String getId() {
    return this.id;
  }</p>
<p>public void setId(String id) {
    this.id = id;
  }</p>
<p>public String getUsername() {
    return this.username;
  }</p>
<p>public void setUsername(String username) {
    this.username = username;
  }</p>
<p>public String getPassword() {
    return this.password;
  }</p>
<p>public void setPassword(String password) {
    this.password = password;
  }</p>
<p>public String getAuthLimit() {
    return this.authLimit;
  }</p>
<p>public void setAuthLimit(String authLimit) {
    this.authLimit = authLimit;
  }</p>
<p>public String getRegisterTime() {
    return this.registerTime;
  }</p>
<p>public void setRegisterTime(String registerTime) {
    this.registerTime = registerTime;
  }</p>
<p>public String getCreateTime() {
    return this.createTime;
  }</p>
<p>public void setCreateTime(String createTime) {
    this.createTime = createTime;
  }</p>
<p>public String getRemarks() {
    return this.remarks;
  }</p>
<p>public void setRemarks(String remarks) {
    this.remarks = remarks;
  }</p>
<p>}
3.新建一个UserInfoService接口
/<em>
 * $filename: VideoInfoService.java,v $
 * $Date: 2014-1-2  $
 * Copyright (C) ZhengHaibo, Inc. All rights reserved.
 * This software is Made by Zhenghaibo.
 </em>/
package edu.njupt.zhb.service;</p>
<p>import edu.njupt.zhb.bean.Userinfo;</p>
<p>/<em>
 </em>@author: ZhengHaibo<br>
<em>web:     http://blog.csdn.net/nuptboyzhb
 </em>GitHub   https://github.com/nuptboyzhb
 <em>mail:    zhb931706659@126.com
 </em>2014-1-2  Nanjing,njupt,China
 */
public interface UserInfoService {</p>
<p>String getUserInfoList(int page, int rows);</p>
<p>String addUser(Userinfo userinfo);</p>
<p>String deleteUser(String userId);</p>
<p>String editUser(Userinfo userinfo);</p>
<p>Userinfo getUserInfoByName(String username);</p>
<p>}
4.新建一个UserInfoServiceImpl类
/<em>
 * $filename: VideoInfoServiceImpl.java,v $
 * $Date: 2014-1-2  $
 * Copyright (C) ZhengHaibo, Inc. All rights reserved.
 * This software is Made by Zhenghaibo.
 </em>/
package edu.njupt.zhb.service.impl;</p>
<p>import java.util.ArrayList;
import java.util.List;</p>
<p>import net.sf.json.JSONObject;</p>
<p>import edu.njupt.zhb.bean.Userinfo;
import edu.njupt.zhb.dao.BaseDao;
import edu.njupt.zhb.service.UserInfoService;
import edu.njupt.zhb.utils.DataGrid;
import edu.njupt.zhb.utils.Tips;
import edu.njupt.zhb.view.ViewUser;</p>
<p>/<em>
 </em>@author: ZhengHaibo<br>
<em>web:     http://blog.csdn.net/nuptboyzhb
 </em>GitHub   https://github.com/nuptboyzhb
 <em>mail:    zhb931706659@126.com
 </em>2014-1-2  Nanjing,njupt,China
 */
public class UserInfoServiceImpl implements UserInfoService{
  private BaseDao&lt;Userinfo&gt; userinfoBaseDao;
  public BaseDao&lt;Userinfo&gt; getUserBaseDao() {
    return userinfoBaseDao;
  }
  public void setUserBaseDao(BaseDao&lt;Userinfo&gt; userinfoBaseDao) {
    this.userinfoBaseDao = userinfoBaseDao;
  }
  @Override
  public String getUserInfoList(int page, int rows) {
    // TODO Auto-generated method stub
    System.out.println("page="+page+",rows="+rows);
    String hql = "from Userinfo";
    try {
      List&lt;Userinfo&gt; list = userinfoBaseDao.find(hql,page,rows);
      List&lt;ViewUser&gt; resultList = new ArrayList&lt;ViewUser&gt;();
      for(Userinfo userinfo:list){
        ViewUser viewUser = new ViewUser();
        viewUser.setBz(userinfo.getRemarks());
        viewUser.setId(userinfo.getId());
        viewUser.setPwd(userinfo.getPassword());
        viewUser.setYhm(userinfo.getUsername());
        viewUser.setYhqx(userinfo.getAuthLimit());
        viewUser.setZcsj(userinfo.getRegisterTime());
        resultList.add(viewUser);
      }
      DataGrid&lt;ViewUser&gt; dataGrid = new DataGrid&lt;ViewUser&gt;();
      dataGrid.setRows(resultList);
      dataGrid.setTotal(userinfoBaseDao.total(hql));
      String result = JSONObject.fromObject(dataGrid).toString();
      return result;
    } catch (Exception e) {
      e.printStackTrace();
      return null;
    }
  }</p>
<p>public String addUser(Userinfo userinfo) {
    // TODO Auto-generated method stub
    Tips tips = new Tips();
    String hql = "from Userinfo where username = +userinfo.getUsername()+";
    try {
      List&lt;Userinfo&gt; list =  userinfoBaseDao.find(hql);
      if(list!=null&amp;&amp;list.size()&gt;0){
        tips.setMsg("添加失败!用户名已经存在！");
        return JSONObject.fromObject(tips).toString();
      }
    } catch (Exception e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }
    try {
      userinfoBaseDao.save(userinfo);
    } catch (Exception e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
      tips.setMsg("添加失败");
      return JSONObject.fromObject(tips).toString();
    }
    tips.setMsg("添加成功");
    return JSONObject.fromObject(tips).toString();
  }
  public String deleteUser(String userid) {
    // TODO Auto-generated method stub
    Tips tips = new Tips();
    try {
      userinfoBaseDao.executeHql("delete from Userinfo where id = +userid+");
    } catch (Exception e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
      tips.setMsg("删除失败");</p>
            </div><!-- /.entry-content -->


        </div><!-- /.eleven.columns -->

<div class="three columns">

<h4>Pages</h4>

 <ul>
  </ul>

<h4>Categories</h4>
<ul class="blank">
		<li><a href="/category/default.html">default</a></li>
		<li><a href="/category/java.html">java</a></li>
		<li><a href="/category/javascript.html">javascript</a></li>
		<li><a href="/category/linux.html">linux</a></li>
		<li><a href="/category/mysql.html">mysql</a></li>
		<li><a href="/category/php.html">php</a></li>
		<li><a href="/category/python.html">python</a></li>
		<li><a href="/category/windows.html">windows</a></li>
</ul>


<h4>Tags</h4>


<nav class="widget">
  <h4>Social</h4>
  <ul class="blank">
    <li><a href="http://bookfuns.com">读书圈</a></li>
    <li><a href="http://123.bookfuns.com">网址大全</a></li>
  </ul>
</nav>

</div> </div><!-- /.row -->


</section>

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">

    
        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">





              </ul>
            </div>
          </div>
        </footer>

    </div>


  <script src="/theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="/theme/js/libs/gumby.min.js"></script>
  <script src="/theme/js/plugins.js"></script>
</body>
</html>