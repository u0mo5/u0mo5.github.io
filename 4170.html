<!DOCTYPE html>
<html lang="zh_cn">
<head>

        <title>11步提高代码质量和整体工作效率</title>
        <meta charset="utf-8" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="/theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="/theme/pygment.css" />

        <script src="/theme/js/libs/modernizr-2.6.2.min.js"></script>




</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="/">读书圈博客 <strong></strong></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="/">首页</a></li>


              </ul>

            </div>

<section id="content" class="body">

   <div class="row">
        <div class="eleven columns">


            <header>
              <h2 class="entry-title">
                <a href="/4170.html" rel="bookmark"
                   title="Permalink to 11步提高代码质量和整体工作效率">11步提高代码质量和整体工作效率</a></h2>
           
            </header>
            <footer class="post-info">
              <abbr class="published" title="1970-01-01T00:00:00+08:00">
                周四 01 一月 1970
              </abbr>
              <address class="vcard author">By 
                <a class="url fn" href="/author/u0mo5.html"> u0mo5</a>
              </address>
            </footer><!-- /.post-info -->
            <div class="entry-content">
              <p>11步提高代码质量和整体工作效率
发布时间：2012-12-28 13:09:00   来源：   评论：0 点击： 次 【字号：大 中 小】</p>
<p>QQ空间新浪微博腾讯微博人人网豆瓣网百度空间百度搜藏开心网复制更多21</p>
<p>这篇文章要介绍的，是我作为专业程序员这些年来学到的能真正提高我的代码质量和整体工作效率的10件事情。1. 永远不要复制代码不惜任何代价避免重复的代码。如果一个常用的代码片段出现在了程序中的几个不同地方...</p>
<p>这篇文章要介绍的，是我作为专业程序员这些年来学到的能真正提高我的代码质量和整体工作效率的11件事情。
1. 永远不要复制代码
不惜任何代价避免重复的代码。如果一个常用的代码片段出现在了程序中的几个不同地方，重构它，把它放到一个自己的函数里。重复的代码会导致你的同事 在读你的代码时产生困惑。而重复的代码如果在一个地方修改，在另外一个地方忘记修改，就会产生到处是bug，它还会使你的代码体积变得臃肿。现代的编程语 言提供了很好的方法来解决这些问题，例如，下面这个问题在以前很难解决，而如今使用lambdas却很好实现：</p>
<p>/// &lt;summary&gt;
/// 一些函数含有部分重复代码
/// &lt;/summary&gt;
void OriginalA()
{
        DoThingsA();</p>
<p>// unique code</p>
<p>DoThingsB();
}</p>
<p>/// &lt;summary&gt;
/// 另外一个含有部分重复代码的函数
/// &lt;/summary&gt;
void OriginalB()
{
        DoThingsA();</p>
<p>// 没有重复的代码</p>
<p>DoThingsB();
}
现在我们重构含有部分相同代码的函数，用delegate模式重写它们：</p>
<p>/// &lt;summary&gt;
/// Encapsulate shared functionality
/// &lt;/summary&gt;
/// &lt;param name="action"&gt;User defined action&lt;/param&gt;
void UniqueWrapper(Action action)
{
        DoThingsA();</p>
<p>action();</p>
<p>DoThingsB();
}</p>
<p>/// &lt;summary&gt;
/// New implmentation of A
/// &lt;/summary&gt;
void NewA()
{
        UniqueWrapper(() =&gt;
        {
                // unique code
        });
}</p>
<p>/// &lt;summary&gt;
/// New implementation of B
/// &lt;/summary&gt;
void NewB()
{
        UniqueWrapper(() =&gt;
        {
                // unique code
        });
}</p>
<ol>
<li>留意你开始分心的时候
当你发现自己在浏览facebook或微博、而不是在解决问题，这通常是一种你需要短暂休息的信号。离开办公桌，去喝一杯咖啡，或去跟同事聊5分钟。尽管这样做看起来有点反直觉，但长久去看，它会提高你的工作效率。</li>
<li>
<p>不要匆忙赶任务而放弃原则
当带着压力去解决一个问题或修改一个bug，你很容易失去自制，发现自己匆匆忙忙，甚至完全忘了一直坚持的重要的测试过程。这通常会导致更多的问题，会让你在老板或同事眼里显得很不专业。</p>
</li>
<li>
<p>测试你完成的代码
你知道你的代码能做什么，而且试了一下，它确实好用，但你实际上需要充分的验证它。分析所有可能的边界情况，测试在所有可能的条件下它都能如期的工作。如果有参数，传递一些预期范围外的值。传递一个null值。如果可能，让同事看看你的代码，问他们能否弄坏它。单元测试是到达这种目的的常规方法。</p>
</li>
<li>代码审查
提交你的代码之前，找个同事一起坐下来，向他解释你做了哪些修改。通常，这样做的过程中你就能发现代码中的错误，而不需要同事说一句话。这比自己审查自己的代码要有效的多得多。</li>
<li>让代码更少
如果你发现写了大量的代码来解决一个简单的问题，你很可能做错了。下面的boolean用法是一个很好的例子：
if (numMines &gt; 0) { enabled=true; } else { enabled=false; }
这时你应该写成这样：
enabled = numMines &gt; 0;
代码越少越好。这会使bug更少，重构可能性更小，出错的几率更小。要适度。可读性同等重要，你可不能这样做而使代码丧失可读性。</li>
<li>为优雅的代码而努力
优雅的代码非常的易读，只用手边很少的代码、让机器做很少的运算就能解决问题。在各种环境中都做到代码优雅是很难的，但经过一段时间的编程，你会对 优雅的代码是个什么样子有个初步的感觉。优雅的代码不会通过重构来获得。当你看到优雅的代码是会很高兴。你会为它自豪。例如，下面就是一个我认为是优雅的 方式来计算多边形面积的方法：</li>
</ol>
<p>static public double GetConvexPolygonArea(Vector2[] vertices)
{
        double area = 0;
        for (int i = 0; i &lt; vertices.Length; i++)
        {
                Vector2 P0 = vertices[i];
                Vector2 P1 = vertices[(i + 1) % vertices.Length];</p>
<p>area += P0.Wedge(P1);
        }</p>
<p>return area / 2;
}</p>
<ol>
<li>编写不言自明的代码
勿庸置疑，注释是编程中很重要的一部分，但能够不言自明的代码跟胜一筹，因为它能让你在看代码时就能理解它。函数名变量名要慎重选择，好的变量/方法名字放到语言语义环境中时，不懂编程的人都能看懂。例如：</li>
</ol>
<p>void DamagePlayer(Player player, int damageAmount)
{
        if (!player.m_IsInvincible &amp;&amp; !player.m_IsDead)
        {
                player.InflictDamage( damageAmount );
        }
}</p>
<p>能自我说明的代码不能代替注释。注释是用来解释“为什么”的，而自我说明的代码是来描述“是什么”的。
9. 不要使用纯数字
直接把数字嵌入代码中是一种恶习，因为无法说明它们是代表什么的。当有重复时更糟糕——相同的数字在代码的多个地方出现。如果只修改了一个，而忘记了其它的。这就导致bug。一定要用一个命名常量来代表你要表达的数字，即使它在代码里只出现一次。
10. 不要做手工劳动
当做一系列动作时，人类总是喜欢犯错误。如果你在做部署工作，并且不是一步能完成的，那你就是在做错事。尽量的让工作能自动化的完成，减少人为错误。当做工作量很大的任务时，这尤其重要。
11. 避免过早优化
当你要去优化一个已经好用的功能代码时，你很有可能会改坏它。优化只能发生在有性能分析报告指示需要优化的时候，通常是在一个项目开发的最后阶段。性能分析之前的优化活动纯属浪费时间，并且会导致bug出现。</p>
            </div><!-- /.entry-content -->


        </div><!-- /.eleven.columns -->

<div class="three columns">
<h4>站内搜索</h4>
              <div class="navbar-search pull-right">
                <script type="text/javascript">(function(){document.write(unescape('%3Cdiv id="bdcs"%3E%3C/div%3E'));var bdcs = document.createElement('script');bdcs.type = 'text/javascript';bdcs.async = true;bdcs.src = 'http://znsv.baidu.com/customer_search/api/js?sid=8305292233022102519' + '&plate_url=' + encodeURIComponent(window.location.href) + '&t=' + Math.ceil(new Date()/3600000);var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(bdcs, s);})();</script>
              </div>    

<h4>页面</h4>

 <ul>
  </ul>

<h4>分类</h4>
<ul class="blank">
		<li><a href="/category/android.html">android</a></li>
		<li><a href="/category/api.html">api</a></li>
		<li><a href="/category/git.html">git</a></li>
		<li><a href="/category/go.html">go</a></li>
		<li><a href="/category/hack.html">hack</a></li>
		<li><a href="/category/ios.html">ios</a></li>
		<li><a href="/category/java.html">java</a></li>
		<li><a href="/category/javascript.html">javascript</a></li>
		<li><a href="/category/linux.html">linux</a></li>
		<li><a href="/category/mysql.html">mysql</a></li>
		<li><a href="/category/operation.html">operation</a></li>
		<li><a href="/category/others.html">others</a></li>
		<li><a href="/category/php.html">php</a></li>
		<li><a href="/category/program.html">program</a></li>
		<li><a href="/category/python.html">python</a></li>
		<li><a href="/category/read.html">read</a></li>
		<li><a href="/category/soft.html">soft</a></li>
		<li><a href="/category/success.html">success</a></li>
		<li><a href="/category/test.html">test</a></li>
		<li><a href="/category/vcs.html">vcs</a></li>
		<li><a href="/category/windows.html">windows</a></li>
</ul>


<h4>标签</h4>


<nav class="widget">
  <h4>友情链接</h4>
  <ul class="blank">
    <li><a href="http://bookfuns.com">读书圈</a></li>
    <li><a href="http://123.bookfuns.com">网址大全</a></li>
  </ul>
</nav>

</div> </div><!-- /.row -->


</section>

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">

    
        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">





              </ul>
            </div>
          </div>
        </footer>

    </div>


  <script src="/theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="/theme/js/libs/gumby.min.js"></script>
  <script src="/theme/js/plugins.js"></script>
</body>
</html>