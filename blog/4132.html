<!DOCTYPE html>
<html lang="zh_cn">
<head>

        <title>Linux提示no crontab for root的解决办法</title>
        <meta charset="utf-8" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="/blog/theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="/blog/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="/blog/theme/pygment.css" />

        <script src="/blog/theme/js/libs/modernizr-2.6.2.min.js"></script>




</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="/blog/">逍遥の博客 <strong></strong></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="/blog/">首页</a></li>


              </ul>

            </div>

<section id="content" class="body">

   <div class="row">
        <div class="eleven columns">


            <header>
              <h2 class="entry-title">
                <a href="/blog/4132.html" rel="bookmark"
                   title="Permalink to Linux提示no crontab for root的解决办法">Linux提示no crontab for root的解决办法</a></h2>
           
            </header>
            <footer class="post-info">
              <abbr class="published" title="1970-01-01T00:00:00+08:00">
                周四 01 一月 1970
              </abbr>
              <address class="vcard author">By 
                <a class="url fn" href="/blog/author/u0mo5.html"> u0mo5</a>
              </address>
            </footer><!-- /.post-info -->
            <div class="entry-content">
              <p>Linux提示no crontab for root的解决办法</p>
<p>安装crontab:yum install crontabs
说明：/sbin/service crond start //启动服务/sbin/service crond stop //关闭服务/sbin/service crond restart //重启服务/sbin/service crond reload //重新载入配置
 
查看crontab服务状态：service crond status
手动启动crontab服务：service crond start
查看crontab服务是否已设置为开机启动，执行命令：ntsysv
加入开机自动启动:chkconfig –level 35 crond on
1，crontab命令
功能说明：设置计时器。
语　　法：crontab [-u &lt;用户名称&gt;][配置文件] 或 crontab [-u &lt;用户名称&gt;][-elr]
补充说明：cron是一个常驻服务，它提供计时器的功能，让用户在特定的时间得以执行预设的指令或程序。只要用户会编辑计时器的配置文件，就可以使 用计时器的功能。其配置文件格式如下：Minute Hour Day Month DayOFWeek Command
参　　数：-e 　编辑该用户的计时器设置。-l 　列出该用户的计时器设置。-r 　删除该用户的计时器设置。-u&lt;用户名称&gt; 　指定要设定计时器的用户名称。
2，crontab 格式
基本格式 :<em> </em>　 <em>　 </em>　 <em>　　command分　时　日　月　周　 命令
第1列表示分钟1～59 每分钟用</em>或者 */1表示第2列表示小时1～23（0表示0点）第3列表示日期1～31第4列 表示月份1～12第5列标识号星期0～6（0表示星期天）第6列要运行的命令</p>
<h1>Use the hash sign to prefix a comment# +—————- minute (0 – 59)# | +————- hour (0 – 23)# | | +———- day of month (1 – 31)# | | | +——- month (1 – 12)# | | | | +—- day of week (0 – 7) (Sunday=0 or 7)# | | | | |# * <em> * </em> * command to be executed</h1>
<p>crontab文件的一些例子：
30 21 * <em> * /etc/init.d/nginx restart每晚的21:30重启 nginx。
45 4 1,10,22 * </em> /etc/init.d/nginx restart每月1、 10、22日的4 : 45重启nginx。
10 1 * <em> 6,0 /etc/init.d/nginx restart每周六、周日的1 : 10重启nginx。
0,30 18-23 * </em> * /etc/init.d/nginx restart每天18 : 00至23 : 00之间每隔30分钟重启nginx。
0 23 * <em> 6 /etc/init.d/nginx restart每星期六的11 : 00 pm重启nginx。
</em> <em>/1 * </em> * /etc/init.d/nginx restart每一小时重启nginx
<em> 23-7/1 * </em> * /etc/init.d/nginx restart晚上11点到早上7点之间，每 隔一小时重启nginx
0 11 4 * mon-wed /etc/init.d/nginx restart每月的4号与每周一到周三 的11点重启nginx
0 4 1 jan * /etc/init.d/nginx restart一月一号的4点重启nginx
<em>/30 * </em> * * /usr/sbin/ntpdate 210.72.145.20每半小时同步一下时间</p>
<p>今天要同步数据。为数据同步做准备，首先要创建一个同步自动作业。进入系统后，发现没有crontab.于是就创建一个，步骤如下：
    1、登录到root用户。
    2、在root下输入：crontab -e
    3、可能会提示你：
    no crontab for root - using an empty one
    然后会叫你“Select a editor ......”下面有几个选项，就是叫你选择编辑器。（选vim.tiny）
    或直接进入编辑页面。
    4、进入crontab编辑页面之后就直接"shift+:",然后输入wq保存即可。然后一个新的crontab就生成了！
===========================================================================</p>
<p>linux下定时执行任务的方法 crontab 用法说明</p>
<p>分类： Linux AIX2012-11-08 10:22 4831人阅读 评论(0) 收藏 举报
linux下定时执行任务的方法 【非原创，个人网上收集整理了一下】在LINUX中，周期执行的任务一般由cron这个守护进程来处理[ps -ef|grep cron]。cron读取一个或多个配置文件，这些配置文件中包含了命令行及其调用时间。cron的配置文件称为“crontab”，是“cron table”的简写。一、cron在3个地方查找配置文件：1、/var/spool/cron/ 这个目录下存放的是每个用户包括root的crontab任务，每个任务以创建者的名字命名，比如tom建的crontab任务对应的文件就是/var/spool/cron/tom。一般一个用户最多只有一个crontab文件。二、/etc/crontab 这个文件负责安排由系统管理员制定的维护系统以及其他任务的crontab。SHELL=/bin/bashPATH=/sbin:/bin:/usr/sbin:/usr/binMAILTO=rootHOME=/# .---------------- minute (0 - 59) # |  .------------- hour (0 - 23)# |  |  .---------- day of month (1 - 31)# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ... # |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7)  OR#sun,mon,tue,wed,thu,fri,sat # |  |  |  |  |# <em>  </em>  <em>  </em>  <em>  command to be executed三、/etc/cron.d/ 这个目录用来存放任何要执行的crontab文件或脚本。四、权限crontab权限问题到/var/adm/cron/下一看，文件cron.allow和cron.deny是否存在用法如下： 1、如果两个文件都不存在，则只有root用户才能使用crontab命令。 2、如果cron.allow存在但cron.deny不存在，则只有列在cron.allow文件里的用户才能使用crontab命令，如果root用户也不在里面，则root用户也不能使用crontab。 3、如果cron.allow不存在, cron.deny存在，则只有列在cron.deny文件里面的用户不能使用crontab命令，其它用户都能使用。 4、如果两个文件都存在，则列在cron.allow文件中而且没有列在cron.deny中的用户可以使用crontab，如果两个文件中都有同一个用户，以cron.allow文件里面是否有该用户为准，如果cron.allow中有该用户，则可以使用crontab命令。 AIX 中 普通用户默认都有 crontab 权限，如果要限制用户使用 crontab ,就需要编辑/var/adm/cron/cron.deny HP-UNIX 中默认普通用户没得crontab 权限 ，要想放开普通用户的crontab 权限可以编五、创建cron脚本第一步：写cron脚本文件,命名为crontest.cron。15,30,45,59 * </em> * <em> echo "xgmtest....." &gt;&gt; xgmtest.txt  表示，每隔15分钟，执行打印一次命令 第二步：添加定时任务。执行命令 “crontab crontest.cron”。搞定 第三步："crontab -l" 查看定时任务是否成功或者检测/var/spool/cron下是否生成对应cron脚本六、cron服务　　cron是一个linux下 的定时执行工具，可以在无需人工干预的情况下运行作业。　　/sbin/service crond start    //启动服务　　/sbin/service crond stop     //关闭服务　　/sbin/service crond restart  //重启服务　　/sbin/service crond reload   //重新载入配置　　/sbin/service crond status   //查看服务状态 crontab用法 　　crontab命令用于安装、删除或者列出用于驱动cron后台进程的表格。用户把需要执行的命令序列放到crontab文件中以获得执行。    每个用户都可以有自己的crontab文件。/var/spool/cron下的crontab文件不可以直接创建或者直接修改。该crontab文件是通过crontab命令创建的　  在crontab文件中如何输入需要执行的命令和时间。该文件中每行都包括六个域，其中前五个域是指定命令被执行的时间，最后一个域是要被执行的命令。    每个域之间使用空格或者制表符分隔。格式如下： 　　minute hour day-of-month month-of-year day-of-week commands     合法值 00-59 00-23 01-31 01-12 0-6 (0 is sunday)     除了数字还有几个个特殊的符号就是"</em>"、"/"和"-"、","，<em>代表所有的取值范围内的数字，"/"代表每的意思,"/5"表示每5个单位，"-"代表从某个数字到某个数字,","分开几个离散的数字。    -l 在标准输出上显示当前的crontab。 　　-r 删除当前的crontab文件。 　　-e 使用VISUAL或者EDITOR环境变量所指的编辑器编辑当前的crontab文件。当结束编辑离开时，编辑后的文件将自动安装。 几个例子： 每天早上6点 0 6 * </em> * echo "Good morning." &gt;&gt; /tmp/test.txt //注意单纯echo，从屏幕上看不到任何输出，因为cron把任何输出都email到root的信箱了。每两个小时 0 <em>/2 * </em> * echo "Have a break now." &gt;&gt; /tmp/test.txt  晚上11点到早上8点之间每两个小时和早上八点 0 23-7/2，8 * <em> * echo "Have a good dream" &gt;&gt; /tmp/test.txt每个月的4号和每个礼拜的礼拜一到礼拜三的早上11点 0 11 4 * 1-3 command line1月1日早上4点 0 4 1 1 * command line SHELL=/bin/bash PATH=/sbin:/bin:/usr/sbin:/usr/bin MAILTO=root //如果出现错误，或者有数据输出，数据作为邮件发给这个帐号 HOME=/ 每小时执行/etc/cron.hourly内的脚本01 * </em> * <em> root run-parts /etc/cron.hourly每天执行/etc/cron.daily内的脚本02 4 * </em> * root run-parts /etc/cron.daily 每星期执行/etc/cron.weekly内的脚本22 4 * <em> 0 root run-parts /etc/cron.weekly 每月去执行/etc/cron.monthly内的脚本 42 4 1 * </em> root run-parts /etc/cron.monthly 注意: "run-parts"这个参数了，如果去掉这个参数的话，后面就可以写要运行的某个脚本名，而不是文件夹名。 　 每天的下午4点、5点、6点的5 min、15 min、25 min、35 min、45 min、55 min时执行命令。 5，15，25，35，45，55 16，17，18 * <em> * command每周一，三，五的下午3：00系统进入维护状态，重新启动系统。00 15 * </em> 1，3，5 shutdown -r +5每小时的10分，40分执行用户目录下的innd/bbslin这个指令： 10，40 * <em> * </em> innd/bbslink 每小时的1分执行用户目录下的bin/account这个指令： 1 * <em> * </em> bin/account每天早晨三点二十分执行用户目录下如下所示的两个指令（每个指令以;分隔）： 20 3 * * * （/bin/rm -f expire.ls logins.bad;bin/expire$#@62;expire.1st）　　每年的一月和四月，4号到9号的3点12分和3点55分执行/bin/rm -f expire.1st这个指令，并把结果添加在mm.txt这个文件之后（mm.txt文件位于用户自己的目录位置）。 12,55 3 4-9 1,4 * /bin/rm -f expire.1st$#@62;$#@62;mm.txt at命令实现定时任务　　假如我们只是想要让特定任务运行一次,那么，这时候就要用到at监控程序了。    at类似打印进程，会把任务放到/var/spool/at目录中，到指定时间运行它 。at命令相当于另一个shell，运行at time命令时，它发送一个个命令，可以输入任意命令或者程序。    at命令执行流程如下　　# at 2:05 tomorrow　　at&gt;/home/kyle/do_job　　at&gt; Ctrl+D　　AT Time中的时间表示方法　　-----------------------------------------------------------------------　　时 间 例子 说明　　-----------------------------------------------------------------------　　Minute    at now + 5 minutes   任务在5分钟后运行　　Hour      at now + 1 hour      任务在1小时后运行　　Days      at now + 3 days      任务在3天后运行　　Weeks     at now + 2 weeks     任务在两周后运行　　Fixed     at midnight          任务在午夜运行　　Fixed     at 10:30pm           任务在晚上10点30分　　注意：linux默认为不启动，而ubuntu默认为启动的。检查是否启动，用service atd检查语法，用service atd status检查atd的状态，用service atd start启动atd服务。　　查看at执行的具体内容：一般位于/var/spool/at目录下面， 用vi打开，在最后一部分就是你的执行程序参数详解-V : 印出版本编号 -q : 使用指定的伫列(Queue)来储存，at 的资料是存放在所谓的 queue 中，使用者可以同时使用多个 queue，而 queue 的编号为 a, b, c... z 以及 A, B, ... Z 共 52 个 -m : 即使程序/指令执行完成后没有输出结果, 也要寄封信给使用者 -f file : 读入预先写好的命令档。使用者不一定要使用交谈模式来输入，可以先将所有的指定先写入档案后再一次读入 网络应用-l : 列出所有的指定 (使用者也可以直接使用 atq 而不用 at -l) -d : 删除指定 (使用者也可以直接使用 atrm 而不用 at -d) -v : 列出所有已经完成但尚未删除的指定 删除任务atrm 2三天后的下午 5 点锺执行 /bin/ls : at 5pm 3 days /bin/ls 三个星期后的下午 5 点锺执行 /bin/ls : at 5pm 2 weeks /bin/ls 明天的 17:20 执行 /bin/date : at 17:20 tomorrow /bin/date 1999 年的最后一天的最后一分钟印出 the end of world ! at 23:59 12/31/1999 echo the end of world !
====================================================================</p>
<p>cron服务是linux的内置服务，但它不会开机自动启动。可以用以下命令启动和停止服务：
/sbin/service crond start
/sbin/service crond stop
/sbin/service crond restart
/sbin/service crond reload
以上1-4行分别为启动、停止、重启服务和重新加载配置。
要把cron设为在开机的时候自动启动，在 /etc/rc.d/rc.local 脚本中加入 /sbin/service crond start 即可
查看当前用户的crontab，输入 crontab -l；
编辑crontab，输入 crontab -e；
删除crontab，输入 crontab -r</p>
<p>版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
            </div><!-- /.entry-content -->


        </div><!-- /.eleven.columns -->

<div class="three columns">
<h4>站内搜索</h4>
              <div class="navbar-search pull-right">
                <script type="text/javascript">(function(){document.write(unescape('%3Cdiv id="bdcs"%3E%3C/div%3E'));var bdcs = document.createElement('script');bdcs.type = 'text/javascript';bdcs.async = true;bdcs.src = 'http://znsv.baidu.com/customer_search/api/js?sid=8305292233022102519' + '&plate_url=' + encodeURIComponent(window.location.href) + '&t=' + Math.ceil(new Date()/3600000);var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(bdcs, s);})();</script>
              </div>    

<h4>页面</h4>

 <ul>
  </ul>

<h4>分类</h4>
<ul class="blank">
		<li><a href="/blog/category/android.html">android</a></li>
		<li><a href="/blog/category/api.html">api</a></li>
		<li><a href="/blog/category/essay.html">essay</a></li>
		<li><a href="/blog/category/git.html">git</a></li>
		<li><a href="/blog/category/go.html">go</a></li>
		<li><a href="/blog/category/hack.html">hack</a></li>
		<li><a href="/blog/category/ios.html">ios</a></li>
		<li><a href="/blog/category/java.html">java</a></li>
		<li><a href="/blog/category/javascript.html">javascript</a></li>
		<li><a href="/blog/category/linux.html">linux</a></li>
		<li><a href="/blog/category/mysql.html">mysql</a></li>
		<li><a href="/blog/category/operation.html">operation</a></li>
		<li><a href="/blog/category/others.html">others</a></li>
		<li><a href="/blog/category/php.html">php</a></li>
		<li><a href="/blog/category/program.html">program</a></li>
		<li><a href="/blog/category/python.html">python</a></li>
		<li><a href="/blog/category/read.html">read</a></li>
		<li><a href="/blog/category/soft.html">soft</a></li>
		<li><a href="/blog/category/success.html">success</a></li>
		<li><a href="/blog/category/test.html">test</a></li>
		<li><a href="/blog/category/vcs.html">vcs</a></li>
		<li><a href="/blog/category/windows.html">windows</a></li>
</ul>


<h4>标签</h4>


<nav class="widget">
  <h4>友情链接</h4>
  <ul class="blank">
    <li><a href="/">搜索</a></li>
    <li><a href="/123">导航</a></li>
    <li><a href="/doc">文档</a></li>
    <li><a href="/blog">博客</a></li>
  </ul>
</nav>

</div> </div><!-- /.row -->


</section>

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">

    
        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">





              </ul>
            </div>
          </div>
        </footer>

    </div>


  <script src="/blog/theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="/blog/theme/js/libs/gumby.min.js"></script>
  <script src="/blog/theme/js/plugins.js"></script>
</body>
</html>