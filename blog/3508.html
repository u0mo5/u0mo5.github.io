<!DOCTYPE html>
<html lang="zh_cn">
<head>

        <title>飞秋的实现原理</title>
        <meta charset="utf-8" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="http://u0mo5.github.io/blog/theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="http://u0mo5.github.io/blog/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="http://u0mo5.github.io/blog/theme/pygment.css" />

        <script src="http://u0mo5.github.io/blog/theme/js/libs/modernizr-2.6.2.min.js"></script>




</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="http://u0mo5.github.io/blog/">读书圈博客 <strong></strong></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="http://u0mo5.github.io/blog/">首页</a></li>


              </ul>

            </div>

<section id="content" class="body">

   <div class="row">
        <div class="eleven columns">


            <header>
              <h2 class="entry-title">
                <a href="http://u0mo5.github.io/blog/3508.html" rel="bookmark"
                   title="Permalink to 飞秋的实现原理">飞秋的实现原理</a></h2>
           
            </header>
            <footer class="post-info">
              <abbr class="published" title="1970-01-01T00:00:00+08:00">
                周四 01 一月 1970
              </abbr>
              <address class="vcard author">By 
                <a class="url fn" href="http://u0mo5.github.io/blog/author/u0mo5.html"> u0mo5</a>
              </address>
            </footer><!-- /.post-info -->
            <div class="entry-content">
              <p>（1）最关键的是局域网用户列表的建立；飞秋启动时使用UDP协议向255.255.255.255这个广播地址发送广播包,默认端口是2425。广播包内容包含用户名、工作组、主机名、IP等信息；
已启动飞秋的用户通过2425端口收到此广播包后，就会在自己的用户列表中添加这个用户的用户名、工作组等信息，同时向对方IP发送本机用户的个人信息；从而双方都能建立起用户列表；
（2）刷新用户列表时发送的广播包和启动时差不多，只不过返回的标识信息略有不同；可以做一个小工具，监控2425端口内存流，就能截获刷新和聊天时的消息。
（3）传送聊天信息时同样使用UDP协议；由于UDP协议是无连接协议，传输速度快，但是没有确认机制，是不可靠的协议，需要自己定义返回信息的标志来判断对方是否收到信息；
（4）用户离线时发送一个离线广播包到255.255.255.255，收到此广播包的用户，根据包中的IP地址（也可能是多种判断标志或者包含硬件标识，比如网卡地址等）删除对方的用户列表信息；
（5）广域网无法直接使用广播方式，靠手工添加”局域网外广播列表”来建立相互的关系；
（6）飞秋传送文件是使用TCP协议，端口2425；
 
其他一些资料：
1.飞秋使用C++语言，开发工具：Visual C++ 4.1, 6.0, or later；
2.飞秋公开源码，在作者（来自日本广岛的白水启章）和汉化者（阿志）网站下载源码，源码注释为日文；可以使用VC++修改、编译；
3.飞秋传书是来自日本的软件，日文版是它的第一版本；此外还有中文，英文，韩文，葡萄牙文等语言；
4.飞秋使用的加密算法：RSA、Blowfish、RC；
5.飞秋可以使用命令行方式发送信息，命令格式如下：
ipmsg [端口] /MSG [/LOG][/SEAL] &lt;主机名或IP地址&gt; &lt;消息&gt;
可以使用IPMsg [端口] 命令改变默认端口，并同时启动多个实例，但是修改后只有使用相同端口的用户才能收到相互的信息；
6.飞秋非安装版，并不是纯绿色软件，直接删除会在注册表留下垃圾键值；
<em> 飞秋把所有设置信息都保存在注册表的以下位置:
用户密码以不可逆加密方式存储.
</em> 如果你忘记了密码, 可以在注册表中将此键值删除，清除密码*HKEY_CURRENT_USERSoftwareHSToolsIPMsgEngPasswordStr
7.飞秋一次传送文件数达到几千个时，有丢失文件的可能，怀疑是飞秋的一个bug，而传输大文件则没有问题；
8.飞秋最稳定的正式版本是V2.06；目前v2.50 alpha6 版正在测试，尚未正式发布；其他如2.71，2007绿色版为修改版本，并非正版；
9.飞秋支持的字符太少，需要补充一下。</p>
            </div><!-- /.entry-content -->


        </div><!-- /.eleven.columns -->

<div class="three columns">
<h4>站内搜索</h4>
              <div class="navbar-search pull-right">
                <script type="text/javascript">(function(){document.write(unescape('%3Cdiv id="bdcs"%3E%3C/div%3E'));var bdcs = document.createElement('script');bdcs.type = 'text/javascript';bdcs.async = true;bdcs.src = 'http://znsv.baidu.com/customer_search/api/js?sid=8305292233022102519' + '&plate_url=' + encodeURIComponent(window.location.href) + '&t=' + Math.ceil(new Date()/3600000);var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(bdcs, s);})();</script>
              </div>    

<h4>页面</h4>

 <ul>
  </ul>

<h4>分类</h4>
<ul class="blank">
		<li><a href="http://u0mo5.github.io/blog/category/android.html">android</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/api.html">api</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/git.html">git</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/go.html">go</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/hack.html">hack</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/ios.html">ios</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/java.html">java</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/javascript.html">javascript</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/linux.html">linux</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/mysql.html">mysql</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/operation.html">operation</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/others.html">others</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/php.html">php</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/program.html">program</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/python.html">python</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/read.html">read</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/soft.html">soft</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/success.html">success</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/test.html">test</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/vcs.html">vcs</a></li>
		<li><a href="http://u0mo5.github.io/blog/category/windows.html">windows</a></li>
</ul>


<h4>标签</h4>


<nav class="widget">
  <h4>友情链接</h4>
  <ul class="blank">
    <li><a href="http://bookfuns.com">读书圈</a></li>
    <li><a href="http://123.bookfuns.com">网址大全</a></li>
  </ul>
</nav>

</div> </div><!-- /.row -->


</section>

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">

    
        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">





              </ul>
            </div>
          </div>
        </footer>

    </div>


  <script src="http://u0mo5.github.io/blog/theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="http://u0mo5.github.io/blog/theme/js/libs/gumby.min.js"></script>
  <script src="http://u0mo5.github.io/blog/theme/js/plugins.js"></script>
</body>
</html>